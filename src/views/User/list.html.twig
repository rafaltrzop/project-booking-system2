{% extends 'base.html.twig' %}
{% for user in users %}
  {% form_theme forms[user.id] 'form/logged_in.html.twig' %}
{% endfor %}

{% block title %}{{ 'none.admin-head.title'|trans }} &mdash; {{ parent() }}{% endblock %}

{% block header %}
  {% include '_header_admin.twig' %}
{% endblock %}

{% block body %}
  <main class="body-content-container">
    <div class="column row">
      <h1>{{ 'user.list.h1'|trans }}</h1>
      <table class="scroll">
        <thead>
          <tr>
            <th>{{ 'user.list.user'|trans }}</th>
            <th>{{ 'user.list.email'|trans }}</th>
            <th>{{ 'user.list.group'|trans }}</th>
            <th>{{ 'user.list.role'|trans }}</th>
            <th colspan="2" class="text-center">{{ 'user.list.options'|trans }}</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
            <tr>
              <td>{{ user.first_name }} {{ user.last_name }}</td>
              <td>{{ user.email }}</td>
              <td>
                {% if user.group_name %}
                  {{ user.group_name }}
                {% else %}
                  &mdash;
                {% endif %}
              </td>
              <td>{{ user.role_name|slice(5)|capitalize }}</td>
              <td>
                <a href="{{ path('user_edit', {'id' : user.id}) }}" class="hollow button">{{ 'user.list.edit'|trans }}</a>
              </td>
              <td>
                {{ form_start(forms[user.id], {'attr': {'onsubmit': 'return confirm();'}, 'action': path('user_delete', {'id' : user.id})}) }}
                {{ form_widget(forms[user.id]) }}
                {{ form_end(forms[user.id]) }}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </main>
{% endblock %}
